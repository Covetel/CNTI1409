# APP_NAME is the Catalyst-normalized name of your app (lowercased,
# s/::/_/g)
# i.e. the portion before "_create.pl" in scripts/*_create.pl
# myapp_user must exist and have a valid shell (i.e. /bin/bash)
export MODULEBUILDRC="/opt/perl5/.modulebuildrc"
export PERL_MM_OPT="INSTALL_BASE=/opt/perl5"
export PERL5LIB="/opt/perl5/lib/perl5/i486-linux-gnu-thread-multi:/opt/perl5/lib/perl5:$PERL5LIB"
export PATH="/opt/perl5/bin:$PATH"

APP_NAME=cnti1409
APP_PATH=/opt/CNTI-14-09/CNTI1409
APP_USER=www-data
PORT=3000

case $1 in
start)
    echo -n "Starting PROD $APP_NAME..."

    cd "$APP_PATH"
    plackup -s Standalone::Prefork $APP_PATH/script/$APP_NAME.psgi -p $PORT &
    echo " started."
    ;;  

stop)
    echo -n "Stopping PROD $APP_NAME: "
    killall plackup
    echo " OK."
    ;;  

restart|force-reload)
    $0 stop
    echo -n "A necessary sleep... "; sleep 2; echo "done."
    $0 start
    ;;  

*)
    echo "Usage: $0 { stop | start | restart }"
    exit 1
    ;;  
esac
